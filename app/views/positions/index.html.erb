<h1 class="text-3xl font-bold text-white mb-8">Positions</h1>

<div class="bg-gray-900 rounded-xl border border-gray-800 overflow-hidden">
  <table class="w-full">
    <thead>
      <tr class="border-b border-gray-800">
        <th class="text-left text-gray-400 text-xs uppercase tracking-wide p-4">Pair</th>
        <th class="text-left text-gray-400 text-xs uppercase tracking-wide p-4">DEX</th>
        <th class="text-right text-gray-400 text-xs uppercase tracking-wide p-4">Asset0 Amount</th>
        <th class="text-right text-gray-400 text-xs uppercase tracking-wide p-4">Asset1 Amount</th>
        <th class="text-right text-gray-400 text-xs uppercase tracking-wide p-4">Value</th>
        <th class="text-center text-gray-400 text-xs uppercase tracking-wide p-4">Hedged</th>
      </tr>
    </thead>
    <tbody>
      <% @positions.each do |position| %>
        <tr class="border-b border-gray-800/50 hover:bg-gray-800/30">
          <td class="p-4">
            <%= link_to position_path(position), class: "text-blue-400 hover:text-blue-300 font-medium" do %>
              <%= position.asset0 %>/<%= position.asset1 %>
            <% end %>
          </td>
          <td class="p-4 text-gray-300 capitalize"><%= position.dex.name %></td>
          <td class="p-4 text-right text-white"><%= number_with_precision(position.asset0_amount, precision: 6) %></td>
          <td class="p-4 text-right text-white"><%= number_with_precision(position.asset1_amount, precision: 2) %></td>
          <td class="p-4 text-right text-white font-medium">$<%= number_with_precision(position.total_value_usd, precision: 2) %></td>
          <td class="p-4 text-center">
            <% if position.hedge&.active? %>
              <span class="inline-block px-2 py-1 rounded-full text-xs font-medium bg-green-900/50 text-green-400 border border-green-800">
                <%= number_to_percentage(position.hedge.target * 100, precision: 0) %>
              </span>
            <% else %>
              <span class="text-gray-500">-</span>
            <% end %>
          </td>
        </tr>
      <% end %>
      <% if @positions.empty? %>
        <tr>
          <td colspan="6" class="p-8 text-center text-gray-500">No active positions found.</td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
